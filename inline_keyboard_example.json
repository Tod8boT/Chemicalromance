{
  "name": "Example: Add Inline Keyboard After Image Generation",
  "nodes": [
    {
      "parameters": {},
      "id": "example-0000-0000-0000-000000000000",
      "name": "When Image Generated",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [240, 300],
      "notes": "‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤: Fal.AI generate ‡∏£‡∏π‡∏õ\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:\n- fal_image_url: URL ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà generate\n- chat_id: Telegram Chat ID\n- prompt: ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ"
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "// Prepare data for inline keyboard\nconst imageUrl = $input.first().json.fal_image_url || $input.first().json.image_url;\nconst chatId = $input.first().json.chat_id;\n\n// Build form URL with parameters\nconst n8nDomain = \"https://your-n8n-domain.com\"; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô domain ‡∏à‡∏£‡∏¥‡∏á\nconst formUrl = `${n8nDomain}/webhook/text-overlay-form?image_url=${encodeURIComponent(imageUrl)}&chat_id=${chatId}`;\n\n// Build inline keyboard\nconst inlineKeyboard = {\n  inline_keyboard: [\n    [\n      {\n        text: \"üìù ‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£\",\n        url: formUrl\n      }\n    ],\n    [\n      {\n        text: \"üé¨ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\",\n        callback_data: \"create_video\"\n      },\n      {\n        text: \"üì§ ‡πÇ‡∏û‡∏™‡πÄ‡∏•‡∏¢\",\n        callback_data: \"post_now\"\n      }\n    ]\n  ]\n};\n\nreturn [{\n  chat_id: chatId,\n  photo: imageUrl,\n  caption: \"‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!\\n\\n‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠?\",\n  reply_markup: JSON.stringify(inlineKeyboard)\n}];"
      },
      "id": "example-1111-1111-1111-111111111111",
      "name": "Prepare Inline Keyboard",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 300],
      "notes": "‡∏™‡∏£‡πâ‡∏≤‡∏á inline keyboard ‡∏û‡∏£‡πâ‡∏≠‡∏° URL ‡∏Ç‡∏≠‡∏á form"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.telegram.org/bot{{ $env.TELEGRAM_BOT_TOKEN }}/sendPhoto",
        "sendBody": true,
        "contentType": "json",
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "={{ $json.chat_id }}"
            },
            {
              "name": "photo",
              "value": "={{ $json.photo }}"
            },
            {
              "name": "caption",
              "value": "={{ $json.caption }}"
            },
            {
              "name": "reply_markup",
              "value": "={{ $json.reply_markup }}"
            }
          ]
        },
        "options": {}
      },
      "id": "example-2222-2222-2222-222222222222",
      "name": "Send Photo with Inline Keyboard",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [680, 300],
      "notes": "‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏û‡∏£‡πâ‡∏≠‡∏° inline keyboard ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Telegram"
    },
    {
      "parameters": {},
      "id": "example-3333-3333-3333-333333333333",
      "name": "User Clicks Button",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [900, 300],
      "notes": "‡πÄ‡∏°‡∏∑‡πà‡∏≠ user ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° \"‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£\"\n‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î browser ‡πÑ‡∏õ‡∏ó‡∏µ‡πà HTML Form\n\n‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô:\n1. User ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°\n2. ‡∏Å‡∏î \"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏¢\"\n3. Workflow text_overlay_interactive.json\n   ‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Cloudinary URL\n   ‚Üí ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö Telegram ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"
    }
  ],
  "connections": {
    "When Image Generated": {
      "main": [
        [
          {
            "node": "Prepare Inline Keyboard",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Inline Keyboard": {
      "main": [
        [
          {
            "node": "Send Photo with Inline Keyboard",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Photo with Inline Keyboard": {
      "main": [
        [
          {
            "node": "User Clicks Button",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-01-08T00:00:00.000Z",
  "versionId": "1"
}
